(self.webpackChunkdocusaurus_template=self.webpackChunkdocusaurus_template||[]).push([[20991],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,h=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},30979:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return u},toc:function(){return d},default:function(){return y}});var a=n(22122),r=n(19756),i=(n(67294),n(3905)),o=n(25108),s=["components"],l={id:"credentials",title:"Overview"},c=void 0,u={unversionedId:"concepts/credentials",id:"concepts/credentials",isDocsHomePage:!1,title:"Overview",description:"Each identity has one or more credentials associated with it:",source:"@site/docs/concepts/credentials.mdx",sourceDirName:"concepts",slug:"/concepts/credentials",permalink:"/kratos/docs/next/concepts/credentials",editUrl:"https://github.com/ory/kratos/edit/master/docs/docs/concepts/credentials.mdx",tags:[],version:"current",lastUpdatedBy:"aeneasr",lastUpdatedAt:1634626107,formattedLastUpdatedAt:"10/19/2021",frontMatter:{id:"credentials",title:"Overview"},sidebar:"docs",previous:{title:"Identity Schema",permalink:"/kratos/docs/next/concepts/identity-schema"},next:{title:"Username / Email & Password",permalink:"/kratos/docs/next/concepts/credentials/username-email-password"}},d=[{value:"Authenticator Assurance Level (AAL) / Multi-Factor Authentication (MFA / 2FA)",id:"authenticator-assurance-level-aal--multi-factor-authentication-mfa--2fa",children:[{value:"Authenticator Assurance Level 1 (AAL1)",id:"authenticator-assurance-level-1-aal1",children:[],level:3},{value:"Authenticator Assurance Level 2 (AAL2)",id:"authenticator-assurance-level-2-aal2",children:[],level:3},{value:"Authenticator Assurance Level 3 (AAL3)",id:"authenticator-assurance-level-3-aal3",children:[],level:3}],level:2}],p=function(e){return function(t){return o.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)}},m=p("Tabs"),h=p("TabItem"),f={toc:d};function y(e){var t=e.components,n=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Each identity has one or more credentials associated with it:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"credentials:\n  password:\n    id: password\n    identifiers:\n      - john.doe@acme.com\n      - johnd@ory.sh\n    config:\n      hashed_password: ...\n  oidc:\n    id: oidc\n    identifiers:\n      - google:j8kf7a3...\n      - facebook:83475891...\n    config:\n      - provider: google\n        identifier: j8kf7a3\n      - provider: facebook\n        identifier: 83475891\n")),(0,i.kt)("p",null,"Ory Kratos supports several credential types:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"password"),": The most common ",(0,i.kt)("em",{parentName:"li"},"identifier (username, email, ...) + password"),"\ncredential."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"oidc"),': The "Log in with Google/Facebook/GitHub/..." credential.'),(0,i.kt)("li",{parentName:"ul"},"Other credentials - support other credential types (X509 Certificates,\nBiometrics, ...) at will be added a later stage.")),(0,i.kt)("p",null,"Each credential - regardless of its type - has one or more identifiers attached\nto it. Each identifier is universally unique. Assuming we had one identity with\ncredentials"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"credentials:\n  password:\n    id: password\n    identifiers:\n      - john.doe@acme.com\n")),(0,i.kt)("p",null,"and tried to create (or update) another identity with the same identifier\n(",(0,i.kt)("inlineCode",{parentName:"p"},"john.doe@acme.com"),"), the system would reject the request with a 409 Conflict\nstate."),(0,i.kt)("p",null,"While credentials must be unique per type, there can be duplicates amongst\nmultiple types:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# This is ok:\ncredentials:\n  password:\n    id: password\n    identifiers:\n      - john.doe@acme.com\n  oidc:\n    id: oidc\n    identifiers:\n      - john.doe@acme.com\n")),(0,i.kt)("p",null,"The same would apply if those were two separate identities:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yaml"},"# Identity 1\ncredentials:\n  password:\n    id: password\n    identifiers:\n      - john.doe@acme.com\n---\n# Identity 2\ncredentials:\n  oidc:\n    id: oidc\n    identifiers:\n      - john.doe@acme.com\n")),(0,i.kt)("h2",{id:"authenticator-assurance-level-aal--multi-factor-authentication-mfa--2fa"},"Authenticator Assurance Level (AAL) / Multi-Factor Authentication (MFA / 2FA)"),(0,i.kt)("p",null,"A detailed explanation of AAL can be found in the\n",(0,i.kt)("a",{parentName:"p",href:"https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-63b.pdf"},"NIST Digital Identity Guidelines Section 4"),":"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"The strength of an authentication transaction is characterized by an ordinal\nmeasurement known as the AAL. Stronger authentication (a higher AAL) requires\nmalicious actors to have better capabilities and expend greater resources in\norder to successfully subvert the authentication process. Authentication at\nhigher AALs can effectively reduce the risk of attacks.")),(0,i.kt)("p",null,"If an Ory Kratos Session meets AAL2, then it also meets AAL1. If it meets AAL3,\nit also meets AAL2 and AAL1."),(0,i.kt)("h3",{id:"authenticator-assurance-level-1-aal1"},"Authenticator Assurance Level 1 (AAL1)"),(0,i.kt)("p",null,"AAL1 provides some assurance that the claimant controls an authenticator bound\nto the subscriber\u2019s account. AAL1 requirements are met if the identity\nauthenticates with"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"an identifier and password."),(0,i.kt)("li",{parentName:"ol"},"an out-of-band one time password (e.g. sending a login code to your email /\nphone)."),(0,i.kt)("li",{parentName:"ol"},"an OpenID Connect ID token.")),(0,i.kt)("p",null,"It is recommended to reauthenticate the session every 30 days. You can configure\nthis by setting the session age to 30 days."),(0,i.kt)(m,{defaultValue:"oss",values:[{label:"Ory Cloud Platform",value:"ocp"},{label:"Ory Kratos",value:"oss"}],mdxType:"Tabs"},(0,i.kt)(h,{value:"ocp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"This option is currently not configurable.\n"))),(0,i.kt)(h,{value:"oss",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'You can configure the session lifespan in the configuration:\n\n```yaml title="path/to/kratos/config.yml\nsession:\n  lifespan: 720h # 30 days\n```\n')))),(0,i.kt)("h3",{id:"authenticator-assurance-level-2-aal2"},"Authenticator Assurance Level 2 (AAL2)"),(0,i.kt)("p",null,"AAL2 can be achieved by combining two single-factor authenticators. AAL2 is met\nif the Ory Kratos Session already meets AAL1 and"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"a TOTP (Google Authenticator) challenge was completed.")),(0,i.kt)("p",null,"It is recommended to reauthenticate the session every 12 hours or after every 30\nminutes of inactivity:"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"At AAL2, authentication of the subscriber SHALL be repeated at least once per\n12 hours during an extended usage session, regardless of user activity.\nReauthentication of the subscriber SHALL be repeated following any period of\ninactivity lasting 30 minutes or longer.")),(0,i.kt)("p",null,"The 12 hours enforcement can be set on the session level. The inactive\nenforcment needs to be implemented in your application."),(0,i.kt)(m,{defaultValue:"oss",values:[{label:"Ory Cloud Platform",value:"ocp"},{label:"Ory Kratos",value:"oss"}],mdxType:"Tabs"},(0,i.kt)(h,{value:"ocp",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"This option is currently not configurable.\n"))),(0,i.kt)(h,{value:"oss",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},'You can configure the session lifespan in the configuration:\n\n```yaml title="path/to/kratos/config.yml\nsession:\n  lifespan: 12h\n```\n')))),(0,i.kt)("h3",{id:"authenticator-assurance-level-3-aal3"},"Authenticator Assurance Level 3 (AAL3)"),(0,i.kt)("p",null,"AAL3 can currently not be achieved using Ory Kratos. We plan to provide AAL3\ncapabilities once WebAuth is implemented."))}y.isMDXComponent=!0}}]);