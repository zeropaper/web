<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.415a7973f">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setDocumentTitle",document.domain+"/"+document.title]),_paq.push(["setCookieDomain","*.ory.sh"]),_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//sqa-web.ory.sh/";_paq.push(["setTrackerUrl",e+"np.php"]),_paq.push(["setSiteId","2"]);var a=document,p=a.createElement("script"),t=a.getElementsByTagName("script")[0];p.type="text/javascript",p.async=!0,p.src=e+"js/np.js",t.parentNode.insertBefore(p,t)}()</script>
<link rel="search" type="application/opensearchdescription+xml" title="ORY Kratos" href="/kratos/docs/opensearch.xml"><title data-react-helmet="true">Social Sign In with OpenID Connect and OAuth2 | ORY Kratos</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v0.4"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v0.4"><meta data-react-helmet="true" property="og:title" content="Social Sign In with OpenID Connect and OAuth2 | ORY Kratos"><meta data-react-helmet="true" name="description" content="Please read the"><meta data-react-helmet="true" property="og:description" content="Please read the"><meta data-react-helmet="true" property="og:url" content="https://www.ory.sh//kratos/docs/v0.4/self-service/flows/user-login-user-registration/openid-connect-social-sign-in-oauth2"><link data-react-helmet="true" rel="shortcut icon" href="/kratos/docs/img/favico.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://www.ory.sh//kratos/docs/v0.4/self-service/flows/user-login-user-registration/openid-connect-social-sign-in-oauth2"><link rel="stylesheet" href="/kratos/docs/styles.eef9374e.css">
<link rel="preload" href="/kratos/docs/styles.2cc326c1.js" as="script">
<link rel="preload" href="/kratos/docs/runtime~main.7e82fe4a.js" as="script">
<link rel="preload" href="/kratos/docs/main.a242d364.js" as="script">
<link rel="preload" href="/kratos/docs/2.e0413d6a.js" as="script">
<link rel="preload" href="/kratos/docs/3.11d592ea.js" as="script">
<link rel="preload" href="/kratos/docs/18b93cb3.0f392b63.js" as="script">
<link rel="preload" href="/kratos/docs/1be78505.a8360abb.js" as="script">
<link rel="preload" href="/kratos/docs/375.6865c9db.js" as="script">
<link rel="preload" href="/kratos/docs/b8d7c5e6.99106736.js" as="script">
<link rel="preload" href="/kratos/docs/1721049b.f899c21b.js" as="script">
<link rel="preload" href="/kratos/docs/374.d93c9cfc.js" as="script">
<link rel="preload" href="/kratos/docs/fadaa1bb.a77936ec.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbarHideable_17Wu navbarHidden_19ww"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a href="https://www.ory.sh/kratos" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/kratos/docs/img/logo-kratos.svg" alt="ORY Kratos" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/kratos/docs/img/logo-kratos.svg" alt="ORY Kratos" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kratos/docs/">Docs</a><a href="https://www.ory.sh/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Ecosystem</a><a href="https://www.ory.sh/blog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog</a><a href="https://github.com/ory/${githubRepoName}/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discussions</a><a href="https://www.ory.sh/chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chat</a><a href="https://github.com/ory/kratos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/kratos/docs/v0.4/">v0.4</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/kratos/docs/next/">Next</a></li><li><a class="dropdown__link" href="/kratos/docs/">v0.5</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration/openid-connect-social-sign-in-oauth2">v0.4</a></li><li><a class="dropdown__link" href="/kratos/docs/v0.3/self-service/flows/user-login-user-registration/openid-connect-social-sign-in-oauth2">v0.3</a></li><li><a class="dropdown__link" href="/kratos/docs/v0.2/">v0.2</a></li><li><a class="dropdown__link" href="/kratos/docs/v0.1/">v0.1</a></li><li><a class="dropdown__link" href="/kratos/docs/versions">All versions</a></li></ul></div><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><div class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></div></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a href="https://www.ory.sh/kratos" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/kratos/docs/img/logo-kratos.svg" alt="ORY Kratos" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/kratos/docs/img/logo-kratos.svg" alt="ORY Kratos" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/kratos/docs/">Docs</a></li><li class="menu__list-item"><a href="https://www.ory.sh/docs" target="_blank" rel="noopener noreferrer" class="menu__link">Ecosystem</a></li><li class="menu__list-item"><a href="https://www.ory.sh/blog" target="_blank" rel="noopener noreferrer" class="menu__link">Blog</a></li><li class="menu__list-item"><a href="https://github.com/ory/${githubRepoName}/discussions" target="_blank" rel="noopener noreferrer" class="menu__link">Discussions</a></li><li class="menu__list-item"><a href="https://www.ory.sh/chat" target="_blank" rel="noopener noreferrer" class="menu__link">Chat</a></li><li class="menu__list-item"><a href="https://github.com/ory/kratos" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/next/">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/">v0.5</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration/openid-connect-social-sign-in-oauth2">v0.4</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/v0.3/self-service/flows/user-login-user-registration/openid-connect-social-sign-in-oauth2">v0.3</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/v0.2/">v0.2</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/v0.1/">v0.1</a></li><li class="menu__list-item"><a class="menu__link" href="/kratos/docs/versions">All versions</a></li></ul></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy sidebarWithHideableNavbar_CROi"><a href="https://www.ory.sh/kratos" target="_blank" rel="noopener noreferrer" tabindex="-1" class="sidebarLogo_xFc8"><img src="/kratos/docs/img/logo-kratos.svg" alt="ORY Kratos" class="themedImage_YANc themedImage--light_3CMI"><img src="/kratos/docs/img/logo-kratos.svg" alt="ORY Kratos" class="themedImage_YANc themedImage--dark_3ARp"></a><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/quickstart">Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/install">Installation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Concepts</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/ui-user-interface">User Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/identity-user-model">Identity Data Model</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Identity Credentials</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/credentials">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/credentials/username-email-password">Username / Email &amp; Password</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/credentials/openid-connect-oidc-oauth2">Social Sign In, OpenID Connect, and OAuth2</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/browser-redirect-flow-completion">HTTP Redirection Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/email-sms">Out-of-band communication via E-Mail and SMS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/federation">Federation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/concepts/security">Threat Models and Security Profiles</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Self Service</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kratos/docs/v0.4/self-service">Before you start reading</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">User Login and User Registration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration/username-email-password">Username or Email and Password</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration/openid-connect-social-sign-in-oauth2">Social Sign In with OpenID Connect and OAuth2</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">User Settings</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/self-service/flows/user-settings">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/self-service/flows/user-settings/user-profile-management">User Profile Management</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/self-service/flows/user-settings/change-password">Change Password</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/self-service/flows/user-settings/link-unlink-openid-connect-oauth2">Link and Unlink OpenID Connect and OAuth2 Connections</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Account Recovery</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/self-service/flows/account-recovery">Account Recovery</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/self-service/flows/account-recovery/password-reset-recovery-link">Recovery Link and Password Reset</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kratos/docs/v0.4/self-service/flows/user-logout">User Logout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kratos/docs/v0.4/self-service/flows/user-facing-errors">User-Facing Errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kratos/docs/v0.4/self-service/flows/verify-email-account-activation">Email and Phone Verification and Account Activation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kratos/docs/v0.4/self-service/flows/2fa-mfa-multi-factor-authentication">MFA / 2FA</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kratos/docs/v0.4/self-service/hooks/index">Hooks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/guides/sign-in-with-github-google-facebook-linkedin">Sign in with GitHub, Google, Facebook, LinkedIn, Microsoft ...</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/guides/zero-trust-iap-proxy-identity-access-proxy">Zero Trust with IAP Proxy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/guides/account-recovery-password-reset">Setting up Account Recovery and Password Reset</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/guides/account-activation-email-verification">Setting up Account Activation and E-Mail Verification</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/guides/multi-tenancy-multitenant">Multitenancy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/guides/high-availability-ha">High Availability</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/reference/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/reference/json-schema-json-paths">JSON Schema and JSON Paths</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/reference/html-forms">HTML Form Parser</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/reference/api">REST API</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Debug &amp; Help</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/debug/csrf">Common Cookie and CSRF Pitfalls</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">SDKs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/sdk">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Further Reading</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/kratos/docs/v0.4/further-reading/comparison">Comparison</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ORY Hydra</a><ul class="menu__list"><li class="menu__list-item"><a href="https://www.ory.sh/hydra" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Home</a></li><li class="menu__list-item"><a href="https://www.ory.sh/hydra/docs" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Docs</a></li><li class="menu__list-item"><a href="https://github.com/ory/hydra" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">GitHub</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ORY Oathkeeper</a><ul class="menu__list"><li class="menu__list-item"><a href="https://www.ory.sh/oathkeeper" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Home</a></li><li class="menu__list-item"><a href="https://www.ory.sh/oathkeeper/docs" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Docs</a></li><li class="menu__list-item"><a href="https://github.com/ory/oathkeeper" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">GitHub</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">ORY Keto</a><ul class="menu__list"><li class="menu__list-item"><a href="https://www.ory.sh/keto" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Home</a></li><li class="menu__list-item"><a href="https://www.ory.sh/keto/docs" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">Docs</a></li><li class="menu__list-item"><a href="https://github.com/ory/keto" target="_blank" rel="noreferrer noopener" class="menu__link" tabindex="-1">GitHub</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for ORY Kratos <strong>v0.4</strong>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/kratos/docs/">latest version</a></strong> (v0.5).</div></div><div class="docItemContainer_a7m4"><article><div><span class="badge badge--secondary">Version: v0.4</span></div><header><h1 class="docTitle_Oumm">Social Sign In with OpenID Connect and OAuth2</h1></header><div class="markdown"><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Before you start</h5></div><div class="admonition-content"><p>Please read the
<a href="/kratos/docs/v0.4/concepts/credentials/openid-connect-oidc-oauth2">OpenID Connect / OAuth2 Credentials Documentation</a>
and
<a href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration">identity Login and Registration Documentation</a>
first.</p></div></div><p>The Social Sign In Strategy enables you to use</p><ul><li><a href="http://github.com/" target="_blank" rel="noopener noreferrer">GitHub</a>;</li><li><a href="https://developer.apple.com/sign-in-with-apple/" target="_blank" rel="noopener noreferrer">Apple</a>;</li><li><a href="https://developers.google.com/identity/sign-in/web/sign-in" target="_blank" rel="noopener noreferrer">Google</a>;</li><li><a href="https://developers.facebook.com/docs/facebook-login/" target="_blank" rel="noopener noreferrer">Facebook</a>;</li><li><a href="https://www.ory.sh/hydra" target="_blank" rel="noopener noreferrer">ORY Hydra</a>;</li><li><a href="https://www.keycloak.org" target="_blank" rel="noopener noreferrer">Keycloak</a>;</li><li>and every other OpenID Connect Certified Provider</li></ul><p>as the Identity Provider. It implements several flows, specifically
<a href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration">identity Login and identity Registration</a>
and <a href="/kratos/docs/v0.4/self-service/flows/user-settings">identity Settings</a>.</p><p>Because OAuth2 and OpenID Connect (OIDC) require the identity to interact with a
browser, this strategy does not work with API-only flows. You cannot log in or
sign up a identity using this strategy</p><ul><li>with REST API or AJAX requests only;</li><li>without a browser.</li></ul><p>This document summarizes exemplary request payloads for performing &quot;Sign in with
...&quot; flows using the identity login and registration flow with the <code>oidc</code>
strategy.</p><p>ORY Kratos automatically converts registration to login flows and vice versa. A
user that&#x27;s already signed up with his/her Google account will be logged in even
if you initiate a registration request.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>It is very important to add the &quot;session&quot; hook to the after oidc registration
hooks. Otherwise your users need to use the login flow again to be able to get a
session.</p><div class="mdxCodeBlock_1zKU"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2eSY">path/to/my/kratos/config.yml</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># $ kratos -c path/to/my/kratos/config.yml serve</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">selfservice</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">flows</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">registration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">after</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">oidc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">hooks</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">hook</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> session</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></div><p>Here we use a configuration with 3 providers:</p><div class="mdxCodeBlock_1zKU"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2eSY">path/to/my/kratos/config.yml</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-yaml codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">selfservice</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">strategies</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">oidc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">providers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> hydra</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic"># provider, client_id, issuer_url, scope, ...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> google</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># provider, client_id, issuer_url, scope, ...</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> github</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic"># provider, client_id, issuer_url, scope, ...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="registration"></a>Registration<a class="hash-link" href="#registration" title="Direct link to heading">#</a></h2><p>Redirecting the browser to the
<a href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration#user-login-and-user-registration-process-sequence">Self-Service Login and Registration Endpoint</a>
initiates the flow. If the <code>oidc</code> strategy is enabled and at least one provider
is configued, the Registration Request Response Payload will include an <code>oidc</code>
method. The method contains different providers, based on your OpenID Connect
Provider configuration:</p><div class="mdxCodeBlock_1zKU"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2eSY">$ curl http://&lt;kratos-admin&gt;/self-service/browser/flows/requests/registration?request=54a9f113-3a7b-4cb8-a553-f072aa4e1622</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json5 codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  id: &#x27;54a9f113-3a7b-4cb8-a553-f072aa4e1622&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  expires_at: &#x27;2020-05-15T11:04:09.342537Z&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  issued_at: &#x27;2020-05-15T10:04:09.342537Z&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  request_url: &#x27;http://127.0.0.1:4433/self-service/browser/flows/registration&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  methods: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    oidc: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      method: &#x27;oidc&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      config: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        action: &#x27;http://127.0.0.1:4455/.ory/kratos/public/self-service/browser/flows/strategies/oidc/auth/54a9f113-3a7b-4cb8-a553-f072aa4e1622&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        method: &#x27;POST&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        fields: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;csrf_token&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;hidden&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            required: true,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;J9blMEwxnz6cL7rgcpu1vthggR13RH+7YMS77GBPn9yo7FqPNc9tTsvCQhu7Cu8AAREWXZF2FiaPia26SfrPBA==&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;hydra&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;google&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;github&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    password: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      method: &#x27;password&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      config: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        action: &#x27;http://127.0.0.1:4455/.ory/kratos/public/self-service/browser/flows/registration/strategies/password?request=54a9f113-3a7b-4cb8-a553-f072aa4e1622&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        method: &#x27;POST&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        fields: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;csrf_token&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;hidden&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            required: true,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;J9blMEwxnz6cL7rgcpu1vthggR13RH+7YMS77GBPn9yo7FqPNc9tTsvCQhu7Cu8AAREWXZF2FiaPia26SfrPBA==&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;password&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;password&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            required: true</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;traits.email&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;email&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;traits.website&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;url&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The next step depends on your Identity JSON Schema and your JsonNet code. We&#x27;re
using the following in this example:</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;$id&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://schemas.ory.sh/presets/kratos/quickstart/email-password/identity.schema.json&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;$schema&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;title&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Person&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;object&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;traits&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;object&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;properties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;email&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;format&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;title&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;E-Mail&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;minLength&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;ory.sh/kratos&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token property" style="color:#36acaa">&quot;credentials&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token property" style="color:#36acaa">&quot;password&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token property" style="color:#36acaa">&quot;identifier&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;website&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;string&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;format&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;uri&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token property" style="color:#36acaa">&quot;minLength&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;required&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;website&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;additionalProperties&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-jsonnet codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">local claims = std.extVar(&#x27;claims&#x27;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">if std.length(claims.sub) == 0 then</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  error &#x27;claim sub not set&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">else</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    identity: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      traits: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        email: claims.sub,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        [if &quot;website&quot; in claims then &quot;website&quot; else null]: claims.website,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>This implies that the identity has a required attributes <code>email</code> and <code>website</code>.
When singing in using Google, we take the <code>sub</code> and <code>website</code> claim are used to
hydrate these fields. If they&#x27;re missing or invalid (because e.g. not an email,
the user returns to the registration form with additional fields that need to be
filled out. Please note that these claims are just examples, Google doesn&#x27;t
actually use email addresses in <code>sub</code> fields and also does not include the
<code>website</code> claim:</p><div class="mdxCodeBlock_1zKU"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2eSY">$ curl http://&lt;kratos-admin&gt;/self-service/browser/flows/requests/registration?request=54a9f113-3a7b-4cb8-a553-f072aa4e1622</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json5 codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  id: &#x27;54a9f113-3a7b-4cb8-a553-f072aa4e1622&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  // ...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  active: &#x27;oidc&#x27;, // &lt;-- this is now set</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  methods: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    oidc: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      method: &#x27;oidc&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      config: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        action: &#x27;http://127.0.0.1:4455/.ory/kratos/public/self-service/browser/flows/strategies/oidc/auth/54a9f113-3a7b-4cb8-a553-f072aa4e1622&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        method: &#x27;POST&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        // Errors can be included here, for example:</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        // &quot;errors&quot;: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //     {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //         &quot;message&quot;: &quot;Authentication failed because no id_token was returned. Please accept the \&quot;openid\&quot; permission and try again.&quot;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        //     }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        // ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        fields: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;csrf_token&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;hidden&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            required: true,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;A84oYSplXqtJTkhSipZc/2+tFXCN2gzWAfhmoK049FKM9JfeU5us2x6jsKlDBwZBttyCMGvoZUvutXD2hI2kig==&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;traits.email&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;text&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;superuser@ory.sh&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;traits.website&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            messages: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">              {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                id: 4000002,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                type: &#x27;error&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                text: &#x27;Property website is missing.&#x27; // &lt;-- because &quot;website&quot; was not set, the user has to fill it out manually.</span></div><div class="token-line" style="color:#393A34"><span class="token plain">              }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;google&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="login"></a>Login<a class="hash-link" href="#login" title="Direct link to heading">#</a></h2><p>Redirecting the browser to the
<a href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration#user-login-and-user-registration-process-sequence">Self-Service Login and Registration Endpoint</a>
initiates the flow. If the <code>oidc</code> strategy is enabled and at least one provider
is configued, the Login Request Response Payload will include an <code>oidc</code> method.
The method contains different providers, based on your OpenID Connect Provider
configuration:</p><div class="mdxCodeBlock_1zKU"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2eSY">$ curl http://&lt;kratos-admin&gt;/self-service/browser/flows/requests/login?request=a1c78949-1436-44bd-93ae-a57836be01c7</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json5 codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  id: &#x27;a1c78949-1436-44bd-93ae-a57836be01c7&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  expires_at: &#x27;2020-05-15T10:49:58.770828Z&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  issued_at: &#x27;2020-05-15T09:49:58.770829Z&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  request_url: &#x27;http://127.0.0.1:4433/self-service/browser/flows/login&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  methods: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // password: ...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    oidc: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      method: &#x27;oidc&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      config: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        action: &#x27;http://127.0.0.1:4455/.ory/kratos/public/self-service/browser/flows/strategies/oidc/auth/a1c78949-1436-44bd-93ae-a57836be01c7&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        method: &#x27;POST&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        fields: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;csrf_token&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;hidden&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            required: true,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;/Q85ogDm+Hv7D+ca7DUXYBRqmkTdMiIzXrZxt8IXgFHd7rkc8+U1WoWNmScDfJ8/cEju/hUIko5N48GR3rMfag==&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;hydra&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;google&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;github&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  forced: false</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The only form validation error that can happen during this flow is that the ID
Token is missing because the user did not authorize the <code>openid</code> grant (does not
apply for <code>provider: github</code>):</p><div class="mdxCodeBlock_1zKU"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2eSY">$ curl http://&lt;kratos-admin&gt;/self-service/browser/flows/requests/login?request=a1c78949-1436-44bd-93ae-a57836be01c7</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json5 codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">{</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  id: &#x27;a1c78949-1436-44bd-93ae-a57836be01c7&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  // expires_at, ...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  active: &#x27;oidc&#x27;, // &lt;- this is now set!</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  methods: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    // password: ...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    oidc: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      method: &#x27;oidc&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      config: {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        action: &#x27;http://127.0.0.1:4455/.ory/kratos/public/self-service/browser/flows/strategies/oidc/auth/a1c78949-1436-44bd-93ae-a57836be01c7&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        method: &#x27;POST&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        messages: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            id: 4000000,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;error&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            text: &#x27;Authentication failed because no id_token was returned. Please accept the &quot;openid&quot; permission and try again.&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        ],</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        fields: [</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;csrf_token&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;hidden&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            required: true,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;viM0pQKXUIthwPklREm/86pdIg3d8CWJOzGOiHtrCW4xGYsae2mi+zYtAd6N2OVNcyy1TTvCTBTUfJjeUt5Ztg==&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;hydra&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;google&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          {</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            name: &#x27;provider&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            type: &#x27;submit&#x27;,</span></div><div class="token-line" style="color:#393A34"><span class="token plain">            value: &#x27;github&#x27;</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">        ]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    }</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  },</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  forced: false</span></div><div class="token-line" style="color:#393A34"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>The flow completes otherwise.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="security-and-defenses"></a>Security and Defenses<a class="hash-link" href="#security-and-defenses" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="account-enumeration"></a>Account Enumeration<a class="hash-link" href="#account-enumeration" title="Direct link to heading">#</a></h3><p>Scenario: In some cases you might want to use the email address returned by e.g.
the GitHub profile to be added to your identity&#x27;s account. You might also want
to use it as an email + password identifier so that the identity is able to log
in with a password as well. An attacker is able to exploit that by creating a
social profile on another site (e.g. Google) and use the victims email address
to set it up (this only works when the victim does not yet have an account with
that email at Google). The attacker can then use that &quot;spoofed&quot; social profile
to try and sign up with your ORY Kratos installation. Because the victim&#x27;s email
address is already known to ORY Kratos, the attacker might be able to observe
the behavior (e.g. seeing an error page) and come to the conclusion that the
victim already has an account at the website.</p><p>Mitigation: This attack surface is rather small and requires a lot of effort,
including forging an e.g. Google profile, and can fail at several stages. To
completely mitigate any chance of that happening, only accept email addresses
that are marked as verified in your Jsonnet code:</p><div class="mdxCodeBlock_1zKU"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2eSY">contrib/quickstart/kratos/email-password/oidc.github.jsonnet</div><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-json codeBlock_tuNs thin-scrollbar codeBlockWithTitle_1UkA"><div class="codeBlockLines_3uvA" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">local claims = </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  email_verified</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> + std.extVar(&#x27;claims&#x27;);</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  identity</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    traits</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Allowing unverified email addresses enables account</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// enumeration attacks, especially if the value is used for</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// e.g. verification or as a password login identifier.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">//</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Therefore we only return the email if it (a) exists and (b) is marked verified</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// by GitHub.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">if </span><span class="token string" style="color:#e3116c">&quot;email_primary&quot;</span><span class="token plain"> in claims &amp;&amp; claims.email_verified then </span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token plain"> else </span><span class="token null keyword" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> claims.email_primary</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/ory/kratos/edit/master/docs/versioned_docs/version-v0.4/self-service/flows/user-login-user-registration/openid-connect-social-sign-in-oauth2.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2020-09-14T06:37:06.000Z" class="docLastUpdatedAt_1Qna">9/14/2020</time> by <strong>aeneasr</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/kratos/docs/v0.4/self-service/flows/user-login-user-registration/username-email-password"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Username or Email and Password</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/kratos/docs/v0.4/self-service/flows/user-settings"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">User Settings Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#registration" class="table-of-contents__link">Registration</a></li><li><a href="#login" class="table-of-contents__link">Login</a></li><li><a href="#security-and-defenses" class="table-of-contents__link">Security and Defenses</a><ul><li><a href="#account-enumeration" class="table-of-contents__link">Account Enumeration</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.ory.sh/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li><li class="footer__item"><a href="https://www.ory.sh/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://www.ory.sh/tos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 ORY GmbH</div></div></div></footer></div>
<script src="/kratos/docs/styles.2cc326c1.js"></script>
<script src="/kratos/docs/runtime~main.7e82fe4a.js"></script>
<script src="/kratos/docs/main.a242d364.js"></script>
<script src="/kratos/docs/2.e0413d6a.js"></script>
<script src="/kratos/docs/3.11d592ea.js"></script>
<script src="/kratos/docs/18b93cb3.0f392b63.js"></script>
<script src="/kratos/docs/1be78505.a8360abb.js"></script>
<script src="/kratos/docs/375.6865c9db.js"></script>
<script src="/kratos/docs/b8d7c5e6.99106736.js"></script>
<script src="/kratos/docs/1721049b.f899c21b.js"></script>
<script src="/kratos/docs/374.d93c9cfc.js"></script>
<script src="/kratos/docs/fadaa1bb.a77936ec.js"></script>
<noscript><p><img src="//sqa-web.ory.sh/np.php?idsite=2&amp;rec=1" style="border:0;" alt=""></p></noscript></body>
</html>