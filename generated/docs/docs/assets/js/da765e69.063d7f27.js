(self.webpackChunkdocusaurus_template=self.webpackChunkdocusaurus_template||[]).push([[8548],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return u}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),m=c(n),u=a,h=m["".concat(l,".").concat(u)]||m[u]||d[u]||r;return n?i.createElement(h,s(s({ref:t},p),{},{components:n})):i.createElement(h,s({ref:t},p))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,s=new Array(r);s[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var c=2;c<r;c++)s[c]=n[c];return i.createElement.apply(null,s)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7413:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return p},default:function(){return m}});var i=n(2122),a=n(9756),r=(n(7294),n(3905)),s=["components"],o={id:"customize-identity-schema",title:"Customize Identity Schema"},l=void 0,c={unversionedId:"guides/customize-identity-schema",id:"guides/customize-identity-schema",isDocsHomePage:!1,title:"Customize Identity Schema",description:"Ory supports custom Identity Schemas. To learn more about the concept of",source:"@site/docs/guides/customize-identity-schema.mdx",sourceDirName:"guides",slug:"/guides/customize-identity-schema",permalink:"/docs/guides/customize-identity-schema",editUrl:"https://github.com/ory/docs/edit/master/docs/docs/guides/customize-identity-schema.mdx",version:"current",lastUpdatedBy:"aeneasr",lastUpdatedAt:1628513752,formattedLastUpdatedAt:"8/9/2021",frontMatter:{id:"customize-identity-schema",title:"Customize Identity Schema"},sidebar:"docs",previous:{title:"Create And Use Personal Access Tokens",permalink:"/docs/guides/create-personal-access-token"},next:{title:"Ory Cloud Project",permalink:"/docs/concepts/project"}},p=[{value:"Setup Custom Identity Schema",id:"setup-custom-identity-schema",children:[]},{value:"Customize Fields",id:"customize-fields",children:[{value:"Changing existing Identity Schemas",id:"changing-existing-identity-schemas",children:[]},{value:"Additional Properties",id:"additional-properties",children:[]}]},{value:"Reference Identity Schema",id:"reference-identity-schema",children:[]},{value:"Best Practices",id:"best-practices",children:[]}],d={toc:p};function m(e){var t=e.components,o=(0,a.Z)(e,s);return(0,r.kt)("wrapper",(0,i.Z)({},d,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Ory supports custom Identity Schemas. To learn more about the concept of\nIdentity Models at Ory, please head over to\n",(0,r.kt)("a",{parentName:"p",href:"/docs/concepts/identity"},"Identity Schema, Custom Fields"),". The Identity Model\nis a JSON Schema which describes the traits that make up an identity, for\nexample customers, users or staff accounts."),(0,r.kt)("p",null,"This guide describes the steps needed to create custom Identity Schemas."),(0,r.kt)("h2",{id:"setup-custom-identity-schema"},"Setup Custom Identity Schema"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Select the Ory Cloud Project, you want to change under\n",(0,r.kt)("a",{parentName:"p",href:"https://console.ory.sh/projects/list"},"Projects/Overview"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},'Head over to the "Customize / General" tab (URL:\n',(0,r.kt)("a",{parentName:"p",href:"https://console.ory.sh/projects/$YOURPROJECTID/settings"},"https://console.ory.sh/projects/$YOURPROJECTID/settings"),") and review the\ncurrently active Identity Schema.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Select a preset model or an empty template as the basis for your new custom\nIdentity Schema.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Check the ",(0,r.kt)("inlineCode",{parentName:"p"},"Customize Identity Schema")," box to enable editing on the Identity\nModel.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Add or remove traits from the Identity Schema as desired, more info in the\n",(0,r.kt)("a",{parentName:"p",href:"#customize-fields"},"Customize Fields")," section.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"When finished editing name your custom Identity Schema. Input the name in the\ntextbox between the checkbox and the schema.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Press ",(0,r.kt)("inlineCode",{parentName:"p"},"Enter")," or hit the ",(0,r.kt)("inlineCode",{parentName:"p"},"Update")," button to save it, once you have made your\nchanges. Currently, it is not possible to edit an existing Identity Schema on\nthe same revision. The Identity Schema can still be reused as a template for a\nfollowing revision."))),(0,r.kt)("p",null,"You can specify a title for your custom Identity Schema. The default is\n",(0,r.kt)("inlineCode",{parentName:"p"},'"title": "Person",')," but this can be changed to something that describes this\nIdentity Schema more accurately, e.g.:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'"title": "Customer",\n"title": "Administrator",\n"title": "Foo",\netc...\n')),(0,r.kt)("h2",{id:"customize-fields"},"Customize Fields"),(0,r.kt)("p",null,"An Identity Schemas traits are specified under"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"traits": {\n  "type": "object",\n    "properties": {\n')),(0,r.kt)("p",null,'Each trait translates into a field on the user-facing frontend. For example the\n"email & password" preset defines two traits - email and password:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'    "traits": {\n      "type": "object",\n      "properties": {\n        "email": {\n          "type": "string",\n          "format": "email",\n          "title": "E-Mail",\n          "ory.sh/kratos": {\n            "credentials": {\n              "password": {\n                "identifier": true\n              }\n            },\n            "recovery": {\n              "via": "email"\n            },\n            "verification": {\n              "via": "email"\n            }\n          }\n        }\n      },\n      "required": [\n        "email"\n      ],\n      "additionalProperties": false\n    }\n')),(0,r.kt)("p",null,"This Identity Schema translates into the following sign-up screen:\n",(0,r.kt)("img",{alt:"Email Password Identity Schema",src:n(6211).Z})),(0,r.kt)("p",null,"The part highlighted below defines the identities ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," for the email+password\nflow in the Ory Cloud. It also includes a method for\n",(0,r.kt)("a",{parentName:"p",href:"https://www.ory.sh/kratos/docs/self-service/flows/account-recovery#recovery-link-method"},(0,r.kt)("inlineCode",{parentName:"a"},"recovery")),"\nas well as\n",(0,r.kt)("a",{parentName:"p",href:"https://www.ory.sh/kratos/docs/self-service/flows/verify-email-account-activation/#verification-link-method"},(0,r.kt)("inlineCode",{parentName:"a"},"verification")),".\nCurrently, only the ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," method is available (recovery/verification via a\nlink sent in an email)."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-diff"},'    "traits": {\n      "type": "object",\n      "properties": {\n+       "email": {\n+         "type": "string",\n+         "format": "email",\n+         "title": "E-Mail",\n+         "ory.sh/kratos": {\n+           "credentials": {\n+             "password": {\n+               "identifier": true\n+             }\n+           },\n            "recovery": {\n              "via": "email"\n            },\n            "verification": {\n              "via": "email"\n            }\n          }\n        }\n      },\n      "required": [\n        "username"\n      ],\n      "additionalProperties": false\n    }\n')),(0,r.kt)("p",null,"To add traits to the Identity Schema, add them inside the ",(0,r.kt)("inlineCode",{parentName:"p"},'traits "properties"')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-diff"},'"traits": {\n  "type": "object",\n    "properties": {\n+      "customtrait": {\n+        "type": "string",\n+        "title": "Your Custom Trait Title"\n+        }\n       }\n    }\n')),(0,r.kt)("p",null,"for example the GitHub Handle as ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," :"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"traits": {\n  "type": "object",\n    "properties": {\n      "handle": {\n        "type": "string",\n        "title": "Your GitHub Handle"\n        }\n      }\n    }\n')),(0,r.kt)("p",null,"or a checkbox as ",(0,r.kt)("inlineCode",{parentName:"p"},"boolean"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'"traits": {\n  "type": "object",\n    "properties": {\n      "newsletter": {\n        "type": "boolean",\n        "title": "Newsletter subscription"\n        }\n      }\n    }\n')),(0,r.kt)("p",null,"Possible values for the ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," are ",(0,r.kt)("inlineCode",{parentName:"p"},"string"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"number"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"integer"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"boolean"),"."),(0,r.kt)("p",null,"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"string")," for text fields, ",(0,r.kt)("inlineCode",{parentName:"p"},"boolean")," for checkboxes fields, ",(0,r.kt)("inlineCode",{parentName:"p"},"integer")," or\n",(0,r.kt)("inlineCode",{parentName:"p"},"number")," for integral or floating-point numbers. If you want to know more about\nthese types, please refer to the\n",(0,r.kt)("a",{parentName:"p",href:"https://json-schema.org/understanding-json-schema/reference/type.html"},"json-schema documentation"),"."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"title")," of each field is what the user as description or sample input. After\nadding the above examples the sign-up screen would look like so:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Example Identity Schema with GitHub and Phone Number Fields",src:n(751).Z})),(0,r.kt)("h3",{id:"changing-existing-identity-schemas"},"Changing existing Identity Schemas"),(0,r.kt)("p",null,"While it is currently not possible to directly edit existing Identity Schemas,\nyou can make revisions."),(0,r.kt)("p",null,'For example, an Identity Schema named "Customer Type 1" exists and you would\nlike to make changes to it:'),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},'Select the "Customer Type 1" Identity Schema and press\n',(0,r.kt)("inlineCode",{parentName:"li"},"Customize Identity Schema"),"."),(0,r.kt)("li",{parentName:"ul"},"Make the necessary changes."),(0,r.kt)("li",{parentName:"ul"},'Enter a new name, e.g. "Customer Type 2".'),(0,r.kt)("li",{parentName:"ul"},"Press the ",(0,r.kt)("inlineCode",{parentName:"li"},"Enter")," key or ",(0,r.kt)("inlineCode",{parentName:"li"},"Update")," to save it.")),(0,r.kt)("h3",{id:"additional-properties"},"Additional Properties"),(0,r.kt)("p",null,"The\n",(0,r.kt)("a",{parentName:"p",href:"https://json-schema.org/understanding-json-schema/reference/object.html#additional-properties"},(0,r.kt)("inlineCode",{parentName:"a"},"additionalProperties")),"\nkeyword is used to control the handling of properties whose names are not listed\nin the properties keyword. This currently has no effect and should be set to\nfalse."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'      "additionalProperties": false\n')),(0,r.kt)("h2",{id:"reference-identity-schema"},"Reference Identity Schema"),(0,r.kt)("p",null,"The following Identity Schema includes first/last and nickname, as well as\nnumber fields for the users' age. There are also two true/false fields for\nspecifying the newsletter subscription and enterprise status."),(0,r.kt)("p",null,"Please note that this is just a reference Identity Schema, for practical uses it\ncontains probably too many traits."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "$id": "https://schemas.ory.sh/presets/kratos/identity.basic.schema.json",\n  "title": "Person",\n  "type": "object",\n  "properties": {\n    "traits": {\n      "type": "object",\n      "properties": {\n        "email": {\n          "type": "string",\n          "format": "email",\n          "title": "E-Mail",\n          "ory.sh/kratos": {\n            "credentials": {\n              "password": {\n                "identifier": true\n              }\n            },\n            "recovery": {\n              "via": "email"\n            },\n            "verification": {\n              "via": "email"\n            }\n          }\n        },\n        "name": {\n          "type": "object",\n          "properties": {\n            "first": {\n              "type": "string",\n              "title": "Your First name"\n            },\n            "last": {\n              "type": "string",\n              "title": "Your Last name"\n            },\n            "nickname": {\n              "type": "string",\n              "title": "Your Nickname"\n            }\n          }\n        },\n        "age": {\n          "type": "integer",\n          "title": "How old are you?"\n        },\n        "newsletter": {\n          "type": "boolean",\n          "title": "Newsletter subscription"\n        },\n        "enterprise": {\n          "type": "boolean",\n          "title": "Are you an Enterprise customer?"\n        }\n      },\n      "required": ["email"],\n      "additionalProperties": false\n    }\n  }\n}\n')),(0,r.kt)("p",null,"This is what the above Identity Schema would look like on the sign-up screen:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Example Identity Schema with many fields",src:n(2443).Z})),(0,r.kt)("h2",{id:"best-practices"},"Best Practices"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Keep your data lean!")),(0,r.kt)("p",null,"Theoretically, any amount and type of data can be included in your Identity\nmodel. We recommend that you do not include more fields than necessary in your\nIdentity Schema. Ideally, the Identity Schema should only include traits that\nare necessary or relevant to the users' profile. If the data is related to\nsomething else - e.g. business logic - it makes sense to store it somewhere\nelse. It can still be captured in the signup form, it just will need to be saved\ne.g. in your backend database."))}m.isMDXComponent=!0},6211:function(e,t,n){"use strict";t.Z=n.p+"assets/images/email-password-9e2b4b83bced7ef84cd7bf0fa9a2b1a2.png"},751:function(e,t,n){"use strict";t.Z=n.p+"assets/images/example-identity0-6b54b00863758715c3ffb77de1d0f0eb.png"},2443:function(e,t,n){"use strict";t.Z=n.p+"assets/images/example-identity1-a2d10e266c6f8c058ab38b78a6df24bd.png"}}]);