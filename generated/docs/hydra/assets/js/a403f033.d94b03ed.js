"use strict";(self.webpackChunkdocusaurus_template=self.webpackChunkdocusaurus_template||[]).push([[10564],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var i=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=i.createContext({}),s=function(e){var t=i.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return i.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(n),h=a,m=u["".concat(c,".").concat(h)]||u[h]||d[h]||r;return n?i.createElement(m,o(o({ref:t},p),{},{components:n})):i.createElement(m,o({ref:t},p))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},52589:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return c},metadata:function(){return s},toc:function(){return p},default:function(){return u}});var i=n(87462),a=n(63366),r=(n(67294),n(3905)),o=["components"],l={id:"openid-connect-dynamic-client-registration",title:"OpenID Connect Dynamic Client Registration"},c=void 0,s={unversionedId:"guides/openid-connect-dynamic-client-registration",id:"guides/openid-connect-dynamic-client-registration",isDocsHomePage:!1,title:"OpenID Connect Dynamic Client Registration",description:"Ory Hydra is capable of exposing",source:"@site/docs/guides/openid-connect-dynamic-client-registration.mdx",sourceDirName:"guides",slug:"/guides/openid-connect-dynamic-client-registration",permalink:"/hydra/docs/next/guides/openid-connect-dynamic-client-registration",editUrl:"https://github.com/ory/hydra/edit/master/docs/docs/guides/openid-connect-dynamic-client-registration.mdx",tags:[],version:"current",lastUpdatedBy:"hackerman",lastUpdatedAt:1641293672,formattedLastUpdatedAt:"1/4/2022",frontMatter:{id:"openid-connect-dynamic-client-registration",title:"OpenID Connect Dynamic Client Registration"},sidebar:"docs",previous:{title:"Advanced OAuth2 and OpenID Connect Flows",permalink:"/hydra/docs/next/advanced"},next:{title:"Creating OAuth 2.0 Clients",permalink:"/hydra/docs/next/guides/oauth2-clients"}},p=[{value:"Register OAuth2 &amp; OpenID Connect Clients",id:"register-oauth2--openid-connect-clients",children:[],level:2},{value:"Manage OAuth2 &amp; OpenID Connect Clients",id:"manage-oauth2--openid-connect-clients",children:[],level:2},{value:"Get OAuth2 &amp; OpenID Connect Clients",id:"get-oauth2--openid-connect-clients",children:[],level:2},{value:"Delete OAuth2 &amp; OpenID Connect Clients",id:"delete-oauth2--openid-connect-clients",children:[],level:2}],d={toc:p};function u(e){var t=e.components,n=(0,a.Z)(e,o);return(0,r.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Ory Hydra is capable of exposing"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://openid.net/specs/openid-connect-registration-1_0.html"},"OpenID Connect Dynamic Client Registration")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://datatracker.ietf.org/doc/html/rfc7591"},"OAuth 2.0 Dynamic Client Registration Protocol")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://datatracker.ietf.org/doc/html/rfc7592"},"OAuth 2.0 Dynamic Client Registration Management Protocol"))),(0,r.kt)("p",null,"endpoints and capabilities. This feature allows third parties to create OAuth2\nClients in self-service, without administrative privileges. The feature is\ndisabled by default!"),(0,r.kt)("p",null,"This is particularly useful if you are running a public service and want users\nto be able to create their own OAuth2 clients easily."),(0,r.kt)("p",null,"To enable this feature, set the following configuration option:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"oidc:\n  dynamic_client_registration:\n    enabled: true\n")),(0,r.kt)("p",null,"Enabling this feature will add listeners to the following four routes at the\npublic endpoint:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"POST /openid/register")," - Register a new OAuth2 Client;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"GET /openid/register/<client_id>")," - Fetch the OAuth2 Client;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"PUT /openid/register/<client_id>")," - Update the OAuth2 Client;"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"DELETE /openid/register/<client_id>")," - Delete the OAuth2 Client;")),(0,r.kt)("h2",{id:"register-oauth2--openid-connect-clients"},"Register OAuth2 & OpenID Connect Clients"),(0,r.kt)("p",null,"If OpenID Connect Dynamic Client Registration is enabled, registering a new\nOAuth2 Client is as simple as:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'POST /openid/register\nContent-Type: application/json\n\n{\n  "client_id": "...",\n  "registration_access_token": "...",\n  ...\n}\n')),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The ",(0,r.kt)("inlineCode",{parentName:"p"},"registration_access_token")," will only be sent once! You need to store this\ntoken in a secure location. This token will be used to update the OAuth2 Client."))),(0,r.kt)("p",null,"Please note that it is not possible to set OAuth2 Client Metadata, the OAuth2\nClient ID nor the OAuth2 Client Secret using this endpoint. This ensure that\nthird parties follow the strict security guidlines of the system."),(0,r.kt)("p",null,"The metadata field is protected and privileged and can only be set using the\nadministrative endpoint! OAuth2 Client Metadata can also not be read using\nOpenID Connect Dynamic Client Registration endpoints!"),(0,r.kt)("h2",{id:"manage-oauth2--openid-connect-clients"},"Manage OAuth2 & OpenID Connect Clients"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"POST")," endpoint requires the client to authenticate with the\n",(0,r.kt)("inlineCode",{parentName:"p"},"registration_access_token")," regardless of the ",(0,r.kt)("inlineCode",{parentName:"p"},"token_endpoint_auth_method"),". It\ncan be used to update the OAuth2 Client."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'PUT /openid/register/{client_id}\nAuthorization: Bearer <registration_access_token>\nContent-Type: application/json\n\n{\n  "redirect_uris": [...]\n  ...\n}\n')),(0,r.kt)("p",null,"The response will include the updated OAuth2 Client."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"When updating the OAuth2 Client, the server will respond with a new registration\naccess token. The old one will become invalid!"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "client_id": "...",\n  "registration_access_token": "..."\n  ...\n}\n')),(0,r.kt)("h2",{id:"get-oauth2--openid-connect-clients"},"Get OAuth2 & OpenID Connect Clients"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"GET")," endpoint requires the client to authenticate with the\n",(0,r.kt)("inlineCode",{parentName:"p"},"registration_access_token")," regardless of the ",(0,r.kt)("inlineCode",{parentName:"p"},"token_endpoint_auth_method"),". It\ncan be used to retrieve the OAuth2 Client."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'GET /openid/register/{client_id}\nAuthorization: Bearer <registration_access_token>\nContent-Type: application/json\n\n{\n  "redirect_uris": [...]\n  ...\n}\n')),(0,r.kt)("h2",{id:"delete-oauth2--openid-connect-clients"},"Delete OAuth2 & OpenID Connect Clients"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"DELETE")," endpoint requires the client to authenticate with the\n",(0,r.kt)("inlineCode",{parentName:"p"},"registration_access_token")," regardless of the ",(0,r.kt)("inlineCode",{parentName:"p"},"token_endpoint_auth_method"),". It\ncan be used to delete the OAuth2 Client."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"DELETE /openid/register/{client_id}\nAuthorization: Bearer <registration_access_token>\n")))}u.isMDXComponent=!0}}]);