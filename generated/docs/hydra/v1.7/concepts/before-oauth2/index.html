<!doctype html>
<html class="docs-version-v1.7" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<script>var _paq=window._paq=window._paq||[];_paq.push(["setDocumentTitle",document.domain+"/"+document.title]),_paq.push(["setCookieDomain","*.ory.sh"]),_paq.push(["disableCookies"]),_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){var e="//sqa-web.ory.sh/";_paq.push(["setTrackerUrl",e+"np.php"]),_paq.push(["setSiteId","2"]);var a=document,p=a.createElement("script"),t=a.getElementsByTagName("script")[0];p.type="text/javascript",p.async=!0,p.src=e+"js/np.min.js",t.parentNode.insertBefore(p,t)}()</script>
<link rel="search" type="application/opensearchdescription+xml" title="ORY Hydra" href="/hydra/docs/opensearch.xml"><title data-react-helmet="true">Do You Need OAuth2? | ORY Hydra</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://www.ory.sh//hydra/docs/v1.7/concepts/before-oauth2"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="v1.7"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-v1.7"><meta data-react-helmet="true" property="og:title" content="Do You Need OAuth2? | ORY Hydra"><meta data-react-helmet="true" name="description" content="OAuth2 and OpenID Connect is all the rage with big platforms (Google, Facebook,"><meta data-react-helmet="true" property="og:description" content="OAuth2 and OpenID Connect is all the rage with big platforms (Google, Facebook,"><link data-react-helmet="true" rel="shortcut icon" href="/hydra/docs/img/favico.png"><link data-react-helmet="true" rel="canonical" href="https://www.ory.sh//hydra/docs/v1.7/concepts/before-oauth2"><link data-react-helmet="true" rel="alternate" href="https://www.ory.sh//hydra/docs/v1.7/concepts/before-oauth2" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://www.ory.sh//hydra/docs/v1.7/concepts/before-oauth2" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/hydra/docs/assets/css/styles.9686f6b1.css">
<link rel="preload" href="/hydra/docs/assets/js/runtime~main.7a55b0c5.js" as="script">
<link rel="preload" href="/hydra/docs/assets/js/main.6310b44a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div id="route-identifier" data-route="/hydra/docs/v1.7/concepts/before-oauth2"><div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC">Sign up for <a href="https://ory.us10.list-manage.com/subscribe?u=ffb1a878e4ec6c0ed312a3480&id=f605a41b53&group[17097][8]=1">important security announcements</a> and if you like ORY Hydra give it a ‚≠êÔ∏è on <a target="_blank" rel="noopener noreferrer" href="https://github.com/ory/hydra">GitHub</a>!</div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.ory.sh/hydra" target="_blank" rel="noopener noreferrer" class="navbar__brand"><img src="/hydra/docs/img/logo-hydra.svg" alt="ORY Hydra" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/hydra/docs/img/logo-hydra.svg" alt="ORY Hydra" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a href="https://www.ory.sh/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Home</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ory/hydra/discussions" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://www.ory.sh/chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/ory/hydra" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" href="/hydra/docs/v1.7/">v1.7</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/hydra/docs/next/concepts/before-oauth2">Next</a></li><li><a class="dropdown__link" href="/hydra/docs/concepts/before-oauth2">v1.10</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.9/concepts/before-oauth2">v1.9</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.8/concepts/before-oauth2">v1.8</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/hydra/docs/v1.7/concepts/before-oauth2">v1.7</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.6/">v1.6</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.5/">v1.5</a></li><li><a class="dropdown__link" href="/hydra/docs/v1.4/">v1.4</a></li><li><a class="dropdown__link" href="/hydra/docs/versions">All versions</a></li></ul></div><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Concepts</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/hydra/docs/v1.7/concepts/before-oauth2">Do You Need OAuth2?</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/oauth2">OAuth 2.0</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/openid-connect-oidc">OpenID Connect</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/login">Login Flow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/consent">Consent Flow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/concepts/logout">Logout Flow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/jwks">JSON Web Key Sets</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/hydra/docs/v1.7/limitations">Limitations</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Guides</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Reference</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Debug &amp; Help</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">SDKs</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Development</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Further Reading</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ORY Kratos</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ORY Oathkeeper</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ORY Keto</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for ORY Hydra <b>v1.7</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/hydra/docs/concepts/before-oauth2">latest version</a></b> (v1.10).</div></div><div class="docItemContainer_33ec"><article><span class="theme-doc-version-badge badge badge--secondary">Version: v1.7</span><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Do You Need OAuth2?</h1></header><p>OAuth2 and OpenID Connect is all the rage with big platforms (Google, Facebook,
GitHub) and identity SaaS products (Okta, Auth0) which is why you probably ended
up at ORY Hydra. But before you start hacking away, the best use of your time
right now is to re-evaluate if you really need OAuth2 and OpenID Connect.</p><p>To do so, we will cover common misunderstandings and misconceptions about OAuth2
in this document and guidance on what to do instead!</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>If you are looking for a system that implements registration, login, password reset,
social sign in, profile management, 2fa, and more, check out <a href="https://www.ory.sh/kratos" target="_blank" rel="noopener noreferrer">ORY Kratos</a>
first!</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="what-its-good-for"></a>What it&#x27;s Good for<a class="hash-link" href="#what-its-good-for" title="Direct link to heading">#</a></h2><p>If you are like GitHub and you want to enable people not associated with your
company like CircleCi or TravisCI to have access to your user&#x27;s data, ORY Hydra
is the right tool for you.</p><p>If you want apps and websites you don&#x27;t own to use your application as a
potential sign in (e.g. be listed alongside &quot;Sign in with Google&quot;, &quot;Sign in with
Apple&quot;), ORY Hydra is the right tool for you.</p><p>If you use an API that works with OAuth2 or OpenID Connect, then of course you
need to use that API - but then you are on the OAuth2 / OpenID Connect client
side!</p><p>If you do not have user registration, password recovery, login form, session
management, or user settings system in place then OAuth2 is most likely not the
right fit for you. If that&#x27;s the case, check out
<a href="https://www.ory.sh/kratos/" target="_blank" rel="noopener noreferrer">ORY Kratos</a>!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="oauth2-and-openid-connect-do-not-solve-registration-password-reset-"></a>OAuth2 and OpenID Connect do not Solve Registration, Password Reset, ...<a class="hash-link" href="#oauth2-and-openid-connect-do-not-solve-registration-password-reset-" title="Direct link to heading">#</a></h2><p>OAuth2 and OpenID Connect are so-called delegation protocols which are not
concerned with user registration, password recovery, changing a password or
email address and so on.</p><p>Actually, OAuth2 and OpenID Connect do not even specify how your users sign in
(email and password? username and password? passwordless? sms 2fa?), they only
establish that <strong>you need a method for users to sign in</strong>.</p><p>If you are wondering what password hashing algorithm to use, or how your users
sign up for your platform, then you don&#x27;t need OAuth2 or OpenID Connect right
now. Instead, you should give <a href="https://www.ory.sh/kratos/" target="_blank" rel="noopener noreferrer">ORY Kratos</a> a spin,
which aims to solve exactly that.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="access-and-refresh-tokens-are-not-sessions"></a>Access and Refresh Tokens are not Sessions!<a class="hash-link" href="#access-and-refresh-tokens-are-not-sessions" title="Direct link to heading">#</a></h2><p>With OAuth2 and OpenID Connect you end up with three session layers:</p><ul><li>Your <strong>Application&#x27;s Session Manager</strong> keeps track of the user within your
application. You will use OpenID Connect to initiate and complete the login,
but your application needs to store and track and invalidate the session.</li><li>ORY Hydra maintains a session cookie. When a user signs in, the cookie will be
set for that user. This allows the next OAuth2 request to complete without
requesting the user to sign in again.</li><li>Optionally - If your application connects to a third-party identity provider
(e.g. Sign in with Google, GitHub, Facebook, ...) that third party provider
also maintains a session of the user.</li></ul><p>A common misconception is that access and refresh tokens represent a user
session. <strong>They do not.</strong></p><p>Let&#x27;s take a look at a common example: CircleCI/TravisCI/... and GitHub. To use
CircleCI or TravisCI or similar products, they usually prompt you to sign into
GitHub because they need access to your repositories. Once access is granted,
CircleCI creates a new user account in their database and generates a session
cookie (see Application Session Manager above). If you now sign out of GitHub,
you will make two observations:</p><ol><li>CircleCI still has access to your repositories;</li><li>You are still logged into CircleCI.</li></ol><p>If you instead sign out of CircleCI:</p><ol><li>CircleCI still has access to your repositories;</li><li>You are still logged into GitHub.</li></ol><p>That is because both applications are built by different people and different
companies, and the user behavior on one site does not reflect user intent on
another. It would be crazy if some app could just log you out of GitHub, or if
signing out of Google would invalidate your sessions on all the websites where
you used &quot;Sign in with Google&quot;.</p><p>Access and refresh tokens allow developers you do not know to do things in your
application in the name of your users over a prolonged period of time. CircleCI
uses access tokens to watch your repositories for changes, update status checks
on pull requests, using access and refresh tokens. These tokens are valid for as
long as you don&#x27;t remove CircleCI from your GitHub account. Logout does not
change any of that.</p><p>If you want to read up on this more, check out
<a href="https://dzone.com/articles/oauth-20-vs-session-management" target="_blank" rel="noopener noreferrer">OAuth 2.0 vs Session Management</a>.</p><p>Now you should be at a point where</p><ol><li>you realize that you only want to solve sign up, login, session management
and that you don&#x27;t need OAuth2 - your next step in this case should be to
check out <a href="https://www.ory.sh/kratos/" target="_blank" rel="noopener noreferrer">ORY Kratos</a> which does solve all of
that;</li><li>you are reaffirmed that you need OAuth2 and OpenID connect because you want
developers you don&#x27;t know to interact with your users and your users&#x27; data -
in which case ORY Hydra is a great fit for you!</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="but-googlefacebook-use-oauth2-and-openid-connect"></a>&quot;But Google/Facebook/... use OAuth2 and OpenID Connect&quot;<a class="hash-link" href="#but-googlefacebook-use-oauth2-and-openid-connect" title="Direct link to heading">#</a></h2><p>Have you ever wondered why, when signing into Google/Facebook/Twitter/...</p><ul><li>you don&#x27;t see a screen asking you to grant permission (&quot;Do you want to allow
... to access your ...?&quot;)?</li><li>their mobile app does not open a browser window or use an embedded WebView?</li><li>your browser doesn&#x27;t perform tons of redirects?</li></ul><p>The answer is quite simple - they do not use OAuth2 or OpenID Connect for login
and session management in first-party scenarios. It goes even further than
that - for example YouTube, which runs on a separate domain - does not use
OAuth2 to sign into your Google account. They use a proprietary flow that
includes HTTP Cookies.</p><p>However, OAuth2 and OpenID Connect do get used in certain scenarios at these
companies:</p><ul><li>The Google Cloud SDK CLI uses OAuth2 to sign into your Google Cloud account;</li><li>FireStick uses the OAuth2 Device Authorization grant to log you into your
Amazon account;</li><li>GitHub does offer an API to third-party developers that involves OAuth2.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="but-saas-identity-products-use-oauth2-and-openid-connect"></a>&quot;But SaaS Identity Products use OAuth2 and OpenID Connect&quot;<a class="hash-link" href="#but-saas-identity-products-use-oauth2-and-openid-connect" title="Direct link to heading">#</a></h2><p>They do, and they have great SDKs to help you avoid a lot of the OAuth2 and
OpenID Complexity until you hit the very core limitations of OAuth2 which are
amongst others:</p><ul><li>Up to three different session states (see e.g.
<a href="https://auth0.com/docs/sessions/concepts/session-layers" target="_blank" rel="noopener noreferrer">Auth0 Session Layers</a>);</li><li>Multi-stage logout flows (see e.g.
<a href="https://auth0.com/docs/quickstart/webapp/nodejs" target="_blank" rel="noopener noreferrer">Auth0 Logout on NodeJS</a>,
<a href="https://auth0.com/docs/tokens/guides/revoke-tokens" target="_blank" rel="noopener noreferrer">Revoke Tokens on Auth0</a>);</li><li>Logout does not invalidate access tokens (see e.g.
<a href="https://auth0.com/docs/logout" target="_blank" rel="noopener noreferrer">Auth0 Logout</a>);</li><li>Complex integration with Social Sign In (e.g. Twitter, Facebook, ...) on
native mobile apps (see e.g.
<a href="https://auth0.com/docs/quickstart/native/ios-swift-facebook-login#before-you-start" target="_blank" rel="noopener noreferrer">iOS Swift - Facebook Login</a>).</li></ul><p>We picked Auth0 docs a lot because they explain the caveats of using OAuth2 and
OpenID Connect well. These limitations apply to all software (e.g. ORY Hydra,
Okta, Keycloak, ...) that use OAuth2 and OpenID Connect as their primary
protocols.</p><p>If all you need is user registration, log in, user settings, and similar flows -
check out <a href="https://www.ory.sh/kratos/" target="_blank" rel="noopener noreferrer">ORY Kratos</a>!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="you-must-ensure-secure-storage-of-access-and-refresh-tokens"></a>You must Ensure Secure Storage of Access and Refresh Tokens<a class="hash-link" href="#you-must-ensure-secure-storage-of-access-and-refresh-tokens" title="Direct link to heading">#</a></h2><p>Storing access and refresh tokens involves tradeoffs:</p><ul><li>Storing tokens in the Browser&#x27;s <code>localStorage</code> or JavaScript cookies is easy,
but you become highly vulnerable to XSS Attacks;</li><li>Storing tokens in a <code>httpOnly</code> cookie is more secure but means that you need a
server-side component which performs the OAuth2 flows and then stores the
tokens in an encrypted cookie;</li><li>Storing tokens in a database is secure but implies a lot of overhead.</li></ul><p>On top of that, you need to refresh tokens when they expire which may become
very complex in scenarios where you have more than one HTTP request using the
access token. This is especially true for systems that have refresh tokens which
are valid for one use only (e.g. ORY Hydra, Auth0, ...).</p><p><strong>Cookies are great</strong> and a common misconception is that cookies are less secure
than tokens or less usable. For 95% of web applications it is enough to work
with cookies, especially if they only run in the browser and not in a native
mobile app. And that&#x27;s great, because the browser takes care of:</p><ul><li>Bound to one top-level-domain only;</li><li>Anti-XSS with <code>httpOnly</code></li><li>TLS enforcment with <code>secure</code>;</li><li>Smaller CSRF attack surface with the new <code>SameSite</code> directive;</li><li>The domain model (cookies are isolated per domain);</li></ul><p><a href="https://www.ory.sh/kratos/" target="_blank" rel="noopener noreferrer">ORY Kratos</a> works both with tokens and cookies.
Implementing login does not involve any manual token handling - just log in and
you&#x27;re done!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="access-token-scope-is-not-an-access-control-permission"></a>Access Token Scope is not an Access Control Permission<a class="hash-link" href="#access-token-scope-is-not-an-access-control-permission" title="Direct link to heading">#</a></h2><p>The OAuth 2.0 Scope <strong>is not an internal RBAC/ACL permission</strong>:</p><ul><li>A permission allows an actor to perform a certain action in a system: <em>Bob is
allowed to delete his own photos</em>.</li><li>OAuth 2.0 Scope implies that an end-user granted certain privileges to a
client: <em>Bob allowed the OAuth 2.0 Client to delete all users</em>. But Bob might
not be allowed to delete all users because Bob is not an admin.</li></ul><p>The OAuth 2.0 Scope can be granted without the end-user actually having the
right permissions. In the examples above, Bob granted an OAuth 2.0 Client the
permission (&quot;scope&quot;) to delete all users in his name. However, since Bob is not
an administrator, that permission (&quot;access control&quot;) is not actually granted to
Bob. Therefore any request by the OAuth 2.0 Client that tries to delete users on
behalf of Bob should fail.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ory/hydra/edit/master/docs/versioned_docs/version-v1.7/concepts/before-oauth2.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated on <b><time datetime="2020-09-03T10:18:37.000Z">9/3/2020</time></b> by <b>aeneasr</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/hydra/docs/v1.7/install"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Installation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/hydra/docs/v1.7/concepts/oauth2"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">OAuth 2.0 ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-its-good-for" class="table-of-contents__link">What it&#39;s Good for</a></li><li><a href="#oauth2-and-openid-connect-do-not-solve-registration-password-reset-" class="table-of-contents__link">OAuth2 and OpenID Connect do not Solve Registration, Password Reset, ...</a></li><li><a href="#access-and-refresh-tokens-are-not-sessions" class="table-of-contents__link">Access and Refresh Tokens are not Sessions!</a></li><li><a href="#but-googlefacebook-use-oauth2-and-openid-connect" class="table-of-contents__link">&quot;But Google/Facebook/... use OAuth2 and OpenID Connect&quot;</a></li><li><a href="#but-saas-identity-products-use-oauth2-and-openid-connect" class="table-of-contents__link">&quot;But SaaS Identity Products use OAuth2 and OpenID Connect&quot;</a></li><li><a href="#you-must-ensure-secure-storage-of-access-and-refresh-tokens" class="table-of-contents__link">You must Ensure Secure Storage of Access and Refresh Tokens</a></li><li><a href="#access-token-scope-is-not-an-access-control-permission" class="table-of-contents__link">Access Token Scope is not an Access Control Permission</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Company</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.ory.sh/imprint" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint</a></li><li class="footer__item"><a href="https://www.ory.sh/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li><li class="footer__item"><a href="https://www.ory.sh/tos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li></ul></div></div><div class="text--center"><div>Copyright ¬© 2021 ORY GmbH</div></div></div></footer></div></div>
<script src="/hydra/docs/assets/js/runtime~main.7a55b0c5.js"></script>
<script src="/hydra/docs/assets/js/main.6310b44a.js"></script>
<noscript><p><img src="//sqa-web.ory.sh/np.php?idsite=2&amp;rec=1" style="border:0;" alt=""></p></noscript></body>
</html>